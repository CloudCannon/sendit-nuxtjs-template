(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{316:function(n,e,t){"use strict";t.r(e);t(15),t(116);var o=t(9),r=(t(52),t(33),t(28),t(69),{asyncData:function(n){return Object(o.a)(regeneratorRuntime.mark((function e(){var t,o,r,c,f,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.$content,o=n.params,r=n.error,c=o.slug||"index",e.next=4,t(c).fetch().catch((function(n){r({statusCode:404,message:"Page not found"})}));case 4:return f=e.sent,(l=f).content_blocks.forEach((function(n){n._bookshop_name=n._bookshop_name.replace(/[^a-zA-Z0-9 ]/g," "),n._bookshop_name=n._bookshop_name.replace(/(^\w{1})|(\s+\w{1})/g,(function(n){return n.toUpperCase()})),n._bookshop_name=n._bookshop_name.replace(" ","")})),e.abrupt("return",{page:f,formattedPage:l});case 8:case"end":return e.stop()}}),e)})))()},data:function(){return{listeners:[]}},mounted:function(){var n=this,e=function(){var n=Object(o.a)(regeneratorRuntime.mark((function n(e,t){var o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.enableEvents(),n.next=3,e.value();case 3:o=n.sent,t(o);case 5:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),t=function(){var n=Object(o.a)(regeneratorRuntime.mark((function n(t){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:window.CloudCannon?e(window.CloudCannon,t):document.addEventListener("cloudcannon:load",(function(n){e(n.detail.CloudCannon,t)})),r=function(){var n=Object(o.a)(regeneratorRuntime.mark((function n(e){var o,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=e.detail.CloudCannon,n.next=3,o.value();case 3:r=n.sent,t(r);case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),document.addEventListener("cloudcannon:update",r),this.listeners.push(r);case 4:case"end":return n.stop()}}),n,this)})));return function(e){return n.apply(this,arguments)}}();console.log(this.listeners),this.listeners=[],t((function(e){return n.updateContentBlocks(e)}))},methods:{stopCloudCannonChanges:function(){var n=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var i,t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i=0;i<n.listeners.length;i++)t=n.listeners[i],document.removeEventListener("cloudcannon:update",t);n.listeners=[];case 2:case"end":return e.stop()}}),e)})))()},formatBookshopName:function(){this.formattedPage.content_blocks.forEach((function(n){n._bookshop_name=n._bookshop_name.replace(/[^a-zA-Z0-9 ]/g," "),n._bookshop_name=n._bookshop_name.replace(/(^\w{1})|(\s+\w{1})/g,(function(n){return n.toUpperCase()})),n._bookshop_name=n._bookshop_name.replace(" ","")}))},updateContentBlocks:function(n){this.formattedPage=n,this.formatBookshopName()}},beforeDestroy:function(){}}),c=r,f=t(49),component=Object(f.a)(c,(function(){var n=this,e=n._self._c;return e("div",[n._l(n.formattedPage.content_blocks,(function(n,t){return e(n._bookshop_name.toString(),{key:n._bookshop_name.toString(),tag:"component",attrs:{block:n,dataBinding:"#content_blocks.".concat(t)}})})),n._v(" "),e("nuxt-content",{attrs:{document:n.page}})],2)}),[],!1,null,null,null);e.default=component.exports}}]);